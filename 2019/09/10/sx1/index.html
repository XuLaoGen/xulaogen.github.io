<!DOCTYPE html><html lang="zh-CN"><head><meta name="generator" content="Hexo 3.9.0"><meta charset="UTF-8"><meta name="author" content="徐源"><meta name="desciption" content="this is xu yuan's blog"><meta name="viewport" content="width=device-width, initial-scale=1.0"><title>Peace &amp; Love</title><link rel="stylesheet" type="text/css" href="//cdn.jsdelivr.net/normalize/3.0.3/normalize.min.css"><link rel="stylesheet" type="text/css" href="/css/carbon.css"><script defer="defer" src="//cdn.jsdelivr.net/jquery/2.1.4/jquery.min.js"></script><script defer="defer" src="//cdn.jsdelivr.net/jquery.pjax/1.9.5/jquery.pjax.min.js"></script><link rel="stylesheet" href="//cdn.jsdelivr.net/fancybox/2.1.5/jquery.fancybox.css" type="text/css" media="screen"><script defer="defer" type="text/javascript" src="//cdn.jsdelivr.net/fancybox/2.1.5/jquery.fancybox.pack.js"></script><script>var performFancybox = true;</script><link rel="stylesheet" type="text/css" href="//cdn.jsdelivr.net/katex/0.5.0/katex.min.css"><script async="async" type="text/javascript" src="//cdn.jsdelivr.net/katex/0.5.0/katex.min.js"></script><script async="async" type="text/javascript" src="//cdn.jsdelivr.net/katex/0.5.0/contrib/auto-render.min.js"></script><script>var doRenderMath = 'katex';</script><script defer="defer" src="/js/carbon.js"></script></head><body><div id="container"><div id="banner"><h1 id="site-title"><a href="/">Peace &amp; Love</a></h1><p id="site-subtitle">XuYuan is a lucky boy</p></div><div id="content"><div class="meta"><h2 class="article-title"><a href="/2019/09/10/sx1">无题</a></h2><div class="article-date"><a href="javascript:void(0);" class="extra-switch">2019-09-10</a></div></div><div class="extra"><span class="Tags">Tags: 无.</span></div><div class="extra"><span class="Categories">Categories: 无.</span></div><div class="article-content"><div class="gallery"></div><p>title: Halo - DjangoRestFramework</p>
<h1 id="01-DjangoRestFramework使用"><a href="#01-DjangoRestFramework使用" class="headerlink" title="01. DjangoRestFramework使用"></a>01. DjangoRestFramework使用</h1><h2 id="1-1-drf序列化"><a href="#1-1-drf序列化" class="headerlink" title="1.1 drf序列化"></a>1.1 drf序列化</h2><blockquote>
<p>一：安装相关软件包</p>
</blockquote>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">pip install djangorestframework==<span class="number">3.9</span><span class="number">.2</span></span><br><span class="line">pip install markdown==<span class="number">3.0</span><span class="number">.1</span>                  <span class="comment"># Markdown support for the browsable API.</span></span><br><span class="line">pip install django-filter==<span class="number">2.1</span><span class="number">.0</span>             <span class="comment"># Filtering support</span></span><br></pre></td></tr></table></figure>

<blockquote>
<p>二：序列化相关操作</p>
</blockquote>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="string">'''1、ser = UserInfoSerializer(instance=obj,many=True)'''</span></span><br><span class="line"><span class="comment"># 对查询实例进行序列化</span></span><br><span class="line"><span class="comment"># ser.data 获取序列化后的json格式数据</span></span><br><span class="line"></span><br><span class="line"><span class="string">'''2、序列化器中定义显示的字段'''</span></span><br><span class="line">name = serializers.CharField()                         <span class="comment"># 显示普通字段</span></span><br><span class="line">ut = serializers.CharField(source=<span class="string">'ut.type_name'</span>)      <span class="comment"># 显示一对多字段</span></span><br><span class="line">gp = serializers.SerializerMethodField()               <span class="comment"># 自定义显示（显示多对多）</span></span><br><span class="line">xxx = serializers.CharField(source=<span class="string">'name'</span>)             <span class="comment"># 也可以自定义显示字段名称</span></span><br></pre></td></tr></table></figure>

<blockquote>
<p>三：校验并保存用户数据</p>
</blockquote>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="string">'''3、对用户提交数据进行验证，并使用save方法保存'''</span></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">RegisterView</span><span class="params">()</span>:</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">post</span><span class="params">(self, request, *args, **kwargs)</span>:</span></span><br><span class="line">        <span class="comment"># request.data 用户注册提交数据</span></span><br><span class="line">        serializer = UserSerializer(data=request.data)</span><br><span class="line">        <span class="keyword">if</span> serializer.is_valid():  <span class="comment"># 验证用户数据是否合法</span></span><br><span class="line">            serializer.save()</span><br><span class="line">            <span class="keyword">return</span> Response(serializer.data, status=<span class="number">201</span>)</span><br><span class="line">        <span class="keyword">return</span> Response(serializer.errors, status=<span class="number">400</span>)</span><br></pre></td></tr></table></figure>

<blockquote>
<p>四：验证与权限</p>
</blockquote>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">UserInfoViewSet</span><span class="params">()</span>:</span></span><br><span class="line">    authentication_classes = [authentication.IsAuthenticated,]  <span class="comment"># 用户认证模块</span></span><br><span class="line">    permission_classes = (authentication.IsOwnerOrReadOnly,)    <span class="comment"># 用户授权模块</span></span><br></pre></td></tr></table></figure>

<h3 id="1-1-1-urls-py"><a href="#1-1-1-urls-py" class="headerlink" title="1.1.1 urls.py"></a>1.1.1 urls.py</h3><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">from</span> django.contrib <span class="keyword">import</span> admin</span><br><span class="line"><span class="keyword">from</span> django.urls <span class="keyword">import</span> path,re_path,include</span><br><span class="line"></span><br><span class="line">urlpatterns = [</span><br><span class="line">    path(<span class="string">'admin/'</span>, admin.site.urls),</span><br><span class="line">    re_path(<span class="string">r'users/'</span>,include((<span class="string">'users.urls'</span>, <span class="string">'users'</span>), namespace=<span class="string">'users'</span>))</span><br><span class="line">]</span><br></pre></td></tr></table></figure>

<h3 id="1-1-2-users-urls-py"><a href="#1-1-2-users-urls-py" class="headerlink" title="1.1.2 users/urls.py"></a>1.1.2 users/urls.py</h3><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">from</span> django.urls <span class="keyword">import</span> path,re_path</span><br><span class="line"><span class="keyword">from</span> users <span class="keyword">import</span> views</span><br><span class="line"></span><br><span class="line">urlpatterns = [</span><br><span class="line">    re_path(<span class="string">r'^info/$'</span>, views.UserInfoViewSet.as_view(), name=<span class="string">'userinfo'</span>),</span><br><span class="line">]</span><br></pre></td></tr></table></figure>

<h3 id="1-1-3-users-models-py"><a href="#1-1-3-users-models-py" class="headerlink" title="1.1.3 users/models.py"></a>1.1.3 users/models.py</h3><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">from</span> __future__ <span class="keyword">import</span> unicode_literals</span><br><span class="line"><span class="keyword">from</span> django.db <span class="keyword">import</span> models</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">UserInfo</span><span class="params">(models.Model)</span>:</span></span><br><span class="line">    name = models.CharField(max_length=<span class="number">64</span>,unique=<span class="literal">True</span>)</span><br><span class="line">    ut = models.ForeignKey(to=<span class="string">'UserType'</span>, on_delete=models.CASCADE)</span><br><span class="line">    gp = models.ManyToManyField(to=<span class="string">'UserGroup'</span>)</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">UserType</span><span class="params">(models.Model)</span>:</span></span><br><span class="line">    type_name = models.CharField(max_length=<span class="number">64</span>,unique=<span class="literal">True</span>)</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">UserGroup</span><span class="params">(models.Model)</span>:</span></span><br><span class="line">    group = models.CharField(max_length=<span class="number">64</span>)</span><br></pre></td></tr></table></figure>

<h3 id="1-1-4-users-views-py"><a href="#1-1-4-users-views-py" class="headerlink" title="1.1.4 users/views.py"></a>1.1.4 users/views.py</h3><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">from</span> rest_framework.views <span class="keyword">import</span> </span><br><span class="line"><span class="keyword">from</span> rest_framework.views <span class="keyword">import</span> Response</span><br><span class="line"><span class="keyword">from</span> users.serializers.userinfo_serializers <span class="keyword">import</span> UserInfoSerializer</span><br><span class="line"><span class="keyword">from</span> users.models <span class="keyword">import</span> UserInfo</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">UserInfoViewSet</span><span class="params">()</span>:</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">get</span><span class="params">(self, request, *args, **kwargs)</span>:</span></span><br><span class="line">        obj = UserInfo.objects.all()</span><br><span class="line">        ser = UserInfoSerializer(instance=obj,many=<span class="literal">True</span>)</span><br><span class="line">        <span class="comment"># ret = json.dumps(ser.data,ensure_ascii=False)</span></span><br><span class="line">        <span class="comment"># return HttpResponse(ret)</span></span><br><span class="line">        <span class="keyword">return</span> Response(ser.data, status=<span class="number">200</span>)</span><br></pre></td></tr></table></figure>

<h3 id="1-1-5-users-serializers-userinfo-serializers-py"><a href="#1-1-5-users-serializers-userinfo-serializers-py" class="headerlink" title="1.1.5 users/serializers/userinfo_serializers.py"></a>1.1.5 users/serializers/userinfo_serializers.py</h3><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">from</span> rest_framework <span class="keyword">import</span> serializers</span><br><span class="line"><span class="keyword">from</span> users.models <span class="keyword">import</span> UserInfo</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">UserInfoSerializer</span><span class="params">(serializers.Serializer)</span>:</span></span><br><span class="line">    name = serializers.CharField()                         <span class="comment"># 显示普通字段</span></span><br><span class="line">    ut = serializers.CharField(source=<span class="string">'ut.type_name'</span>)      <span class="comment"># 显示一对多字段</span></span><br><span class="line">    gp = serializers.SerializerMethodField()               <span class="comment"># 自定义显示（显示多对多）</span></span><br><span class="line">    xxx = serializers.CharField(source=<span class="string">'name'</span>)             <span class="comment"># 也可以自定义显示字段名称</span></span><br><span class="line"></span><br><span class="line">    <span class="class"><span class="keyword">class</span> <span class="title">Meta</span>:</span></span><br><span class="line">        model = UserInfo</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">get_gp</span><span class="params">(self,row)</span>:</span></span><br><span class="line">        <span class="string">'''row: 传过来的正是 UserInfo表的对象'''</span></span><br><span class="line">        gp_obj_list = row.gp.all()  <span class="comment"># 获取用户所有组</span></span><br><span class="line">        ret = []</span><br><span class="line">        <span class="keyword">for</span> item <span class="keyword">in</span> gp_obj_list:</span><br><span class="line">            ret.append(&#123;<span class="string">'id'</span>:item.id,<span class="string">'gp'</span>:item.group&#125;)</span><br><span class="line">        <span class="keyword">return</span> ret</span><br></pre></td></tr></table></figure>

<h2 id="1-2-认证与权限"><a href="#1-2-认证与权限" class="headerlink" title="1.2 认证与权限"></a>1.2 认证与权限</h2><h3 id="1-2-1-urls-py"><a href="#1-2-1-urls-py" class="headerlink" title="1.2.1 urls.py"></a>1.2.1 urls.py</h3><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">from</span> django.contrib <span class="keyword">import</span> admin</span><br><span class="line"><span class="keyword">from</span> django.urls <span class="keyword">import</span> path,re_path,include</span><br><span class="line"></span><br><span class="line">urlpatterns = [</span><br><span class="line">    path(<span class="string">'admin/'</span>, admin.site.urls),</span><br><span class="line">    re_path(<span class="string">r'users/'</span>,include((<span class="string">'users.urls'</span>, <span class="string">'users'</span>), namespace=<span class="string">'users'</span>))</span><br><span class="line">]</span><br></pre></td></tr></table></figure>

<h3 id="1-2-2-users-urls-py"><a href="#1-2-2-users-urls-py" class="headerlink" title="1.2.2 users/urls.py"></a>1.2.2 users/urls.py</h3><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">from</span> django.urls <span class="keyword">import</span> path,re_path,include</span><br><span class="line"><span class="keyword">from</span> users <span class="keyword">import</span> views</span><br><span class="line"></span><br><span class="line">urlpatterns = [</span><br><span class="line">    re_path(<span class="string">r'info'</span>, views.UserInfoViewSet.as_view(), name=<span class="string">'user'</span>),</span><br><span class="line">]</span><br></pre></td></tr></table></figure>

<h3 id="1-2-3-users-views-py"><a href="#1-2-3-users-views-py" class="headerlink" title="1.2.3 users/views.py"></a>1.2.3 users/views.py</h3><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">from</span> rest_framework.views <span class="keyword">import</span> </span><br><span class="line"><span class="keyword">from</span> django.http <span class="keyword">import</span> JsonResponse</span><br><span class="line"><span class="keyword">from</span> common.auth <span class="keyword">import</span> authentication</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">UserInfoViewSet</span><span class="params">()</span>:</span></span><br><span class="line">    authentication_classes = [authentication.IsAuthenticated,]</span><br><span class="line">    permission_classes = (authentication.IsOwnerOrReadOnly,)</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">__init__</span><span class="params">(self)</span>:</span></span><br><span class="line">        super(UserInfoViewSet, self).__init__()</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">get</span><span class="params">(self, request, *args, **kwargs)</span>:</span></span><br><span class="line">        result = &#123;</span><br><span class="line">            <span class="string">'status'</span>: <span class="literal">True</span>,</span><br><span class="line">            <span class="string">'data'</span>: <span class="string">'response data'</span></span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> JsonResponse(result, status=<span class="number">200</span>)</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">post</span><span class="params">(self, request, *args, **kwargs)</span>:</span></span><br><span class="line">        result = &#123;</span><br><span class="line">            <span class="string">'status'</span>: <span class="literal">True</span>,</span><br><span class="line">            <span class="string">'data'</span>: <span class="string">'response data'</span></span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> JsonResponse(result, status=<span class="number">200</span>)</span><br></pre></td></tr></table></figure>

<h3 id="1-2-4-common-auth-authentication-py"><a href="#1-2-4-common-auth-authentication-py" class="headerlink" title="1.2.4 common\auth\authentication.py"></a>1.2.4 common\auth\authentication.py</h3><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">from</span> rest_framework <span class="keyword">import</span> authentication</span><br><span class="line"><span class="keyword">from</span> rest_framework <span class="keyword">import</span> exceptions</span><br><span class="line"><span class="keyword">from</span> rest_framework <span class="keyword">import</span> permissions</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">IsOwnerOrReadOnly</span><span class="params">(permissions.BasePermission)</span>:</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">has_permission</span><span class="params">(self, request, view)</span>:</span></span><br><span class="line">        <span class="keyword">if</span> <span class="literal">False</span>:  <span class="comment"># 这里暂且不进行权限验证</span></span><br><span class="line">            <span class="keyword">raise</span> exceptions.ParseError(<span class="string">'您没有操作的权限'</span>)</span><br><span class="line">        <span class="keyword">return</span> <span class="literal">True</span></span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">IsAuthenticated</span><span class="params">(authentication.BaseAuthentication)</span>:</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">authenticate</span><span class="params">(self, request)</span>:</span></span><br><span class="line">        auth = request.META.get(<span class="string">'HTTP_AUTHORIZATION'</span>, <span class="literal">None</span>)  <span class="comment"># 获取 header中的 Authorization</span></span><br><span class="line">        <span class="keyword">if</span> auth <span class="keyword">is</span> <span class="literal">None</span>:</span><br><span class="line">            <span class="keyword">raise</span> exceptions.NotAuthenticated()</span><br><span class="line"></span><br><span class="line">        <span class="string">'''这里应该是验证token是否合法逻辑'''</span></span><br><span class="line">        <span class="comment"># token = Token.objects.filter(key=auth)</span></span><br><span class="line">        <span class="comment"># try:</span></span><br><span class="line">        <span class="comment">#     request.user = token[0].user</span></span><br><span class="line">        <span class="comment"># except IndexError:</span></span><br><span class="line">        <span class="comment">#     raise exceptions.NotAuthenticated('Invalid input Authenticated')</span></span><br><span class="line">        <span class="keyword">return</span> (request, <span class="literal">None</span>)</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">authenticate_header</span><span class="params">(self, request)</span>:</span></span><br><span class="line">        msg = <span class="string">'Invalid token.Please get token first'</span></span><br><span class="line">        <span class="keyword">return</span> exceptions.NotAuthenticated(msg)</span><br></pre></td></tr></table></figure>

<h2 id="1-3-分页"><a href="#1-3-分页" class="headerlink" title="1.3 分页"></a>1.3 分页</h2><blockquote>
<p>一：分页基本语法</p>
</blockquote>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="string">'''1、实例化一个Paginator对象'''</span></span><br><span class="line">paginator = Paginator(objs, page_size)    <span class="comment"># paginator对象</span></span><br><span class="line"></span><br><span class="line"><span class="string">'''2、获取总数量&amp;总页数'''</span></span><br><span class="line">total_count = paginator.count   <span class="comment"># 总数量</span></span><br><span class="line">total = paginator.num_pages     <span class="comment"># 总页数</span></span><br><span class="line"></span><br><span class="line"><span class="string">'''3、使用objs对象获取指定页数内容'''</span></span><br><span class="line">objs = paginator.page(page)</span><br><span class="line"></span><br><span class="line"><span class="string">'''4、对分页后的数据进行序列化操作'''</span></span><br><span class="line">serializer = Serializer(objs, many=<span class="literal">True</span>)    <span class="comment"># 序列化操作</span></span><br></pre></td></tr></table></figure>

<h2 id="1-4-JWT配置使用"><a href="#1-4-JWT配置使用" class="headerlink" title="1.4 JWT配置使用"></a>1.4 JWT配置使用</h2><blockquote>
<p>一：安装相关包</p>
</blockquote>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 安装： pip install djangorestframework-jwt</span></span><br><span class="line"><span class="comment"># 添加app应用：python manage.py startapp users</span></span><br><span class="line"><span class="comment"># JWT原理：</span></span><br></pre></td></tr></table></figure>

<h3 id="1-4-1-settings-py-配置使用JWT"><a href="#1-4-1-settings-py-配置使用JWT" class="headerlink" title="1.4.1 settings.py 配置使用JWT"></a>1.4.1 settings.py 配置使用JWT</h3><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">########### 1、在INSTALLED_APPS中加入'rest_framework.authtoken', #################</span></span><br><span class="line">INSTALLED_APPS = [</span><br><span class="line">    <span class="string">'''</span></span><br><span class="line"><span class="string">    'rest_framework.authtoken',  # </span></span><br><span class="line"><span class="string">    '''</span></span><br><span class="line">]</span><br><span class="line"></span><br><span class="line"><span class="comment">################### 2、配置jwt验证 ######################</span></span><br><span class="line">REST_FRAMEWORK = &#123;</span><br><span class="line">    <span class="comment"># 身份认证</span></span><br><span class="line">    <span class="string">'DEFAULT_AUTHENTICATION_CLASSES'</span>: (</span><br><span class="line">        <span class="string">'rest_framework_jwt.authentication.JSONWebTokenAuthentication'</span>,</span><br><span class="line">        <span class="string">'rest_framework.authentication.SessionAuthentication'</span>,</span><br><span class="line">        <span class="string">'rest_framework.authentication.BasicAuthentication'</span>,</span><br><span class="line">    ),</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> datetime</span><br><span class="line"></span><br><span class="line">JWT_AUTH = &#123;</span><br><span class="line">    <span class="string">'JWT_AUTH_HEADER_PREFIX'</span>: <span class="string">'JWT'</span>,</span><br><span class="line">    <span class="string">'JWT_EXPIRATION_DELTA'</span>: datetime.timedelta(days=<span class="number">1</span>),</span><br><span class="line">    <span class="string">'JWT_RESPONSE_PAYLOAD_HANDLER'</span>:</span><br><span class="line">        <span class="string">'users.views.jwt_response_payload_handler'</span>,  <span class="comment"># 重新login登录返回函数</span></span><br><span class="line">&#125;</span><br><span class="line">AUTH_USER_MODEL=<span class="string">'users.User'</span>  <span class="comment"># 指定使用users APP中的 model User进行验证</span></span><br></pre></td></tr></table></figure>

<h3 id="1-4-2-urls-py"><a href="#1-4-2-urls-py" class="headerlink" title="1.4.2 urls.py"></a>1.4.2 urls.py</h3><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">from</span> django.contrib <span class="keyword">import</span> admin</span><br><span class="line"><span class="keyword">from</span> django.urls <span class="keyword">import</span> path,re_path,include</span><br><span class="line"></span><br><span class="line">urlpatterns = [</span><br><span class="line">    path(<span class="string">'admin/'</span>, admin.site.urls),</span><br><span class="line">    re_path(<span class="string">r'users/'</span>,include((<span class="string">'users.urls'</span>,<span class="string">'users'</span>),namespace=<span class="string">'users'</span>))</span><br><span class="line">]</span><br></pre></td></tr></table></figure>

<h3 id="1-4-3-users-urls-py"><a href="#1-4-3-users-urls-py" class="headerlink" title="1.4.3 users/urls.py"></a>1.4.3 users/urls.py</h3><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#! /usr/bin/env python</span></span><br><span class="line"><span class="comment"># -*- coding: utf-8 -*-</span></span><br><span class="line"><span class="keyword">from</span> django.urls <span class="keyword">import</span> path,re_path,include</span><br><span class="line"><span class="keyword">from</span> users <span class="keyword">import</span> views</span><br><span class="line"><span class="keyword">from</span> rest_framework_jwt.views <span class="keyword">import</span> obtain_jwt_token  <span class="comment"># 验证密码后返回token</span></span><br><span class="line"></span><br><span class="line">urlpatterns = [</span><br><span class="line">    path(<span class="string">'v1/register/'</span>, views.RegisterView.as_view(), name=<span class="string">'register'</span>),  <span class="comment"># 注册用户</span></span><br><span class="line">    path(<span class="string">'v1/login/'</span>, obtain_jwt_token,name=<span class="string">'login'</span>),  <span class="comment"># 用户登录后返回token</span></span><br><span class="line">    path(<span class="string">'v1/list/'</span>, views.UserList.as_view(), name=<span class="string">'register'</span>),  <span class="comment"># 测试需要携带token才能访问</span></span><br><span class="line">]</span><br></pre></td></tr></table></figure>

<h3 id="1-4-4-users-models-py"><a href="#1-4-4-users-models-py" class="headerlink" title="1.4.4 users/models.py"></a>1.4.4 users/models.py</h3><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">from</span> django.db <span class="keyword">import</span> models</span><br><span class="line"><span class="keyword">from</span> django.contrib.auth.models <span class="keyword">import</span> AbstractUser</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">User</span><span class="params">(AbstractUser)</span>:</span></span><br><span class="line">    username = models.CharField(max_length=<span class="number">64</span>, unique=<span class="literal">True</span>)</span><br><span class="line">    password = models.CharField(max_length=<span class="number">255</span>)</span><br><span class="line">    phone = models.CharField(max_length=<span class="number">64</span>)</span><br><span class="line">    token = models.CharField(max_length=<span class="number">255</span>)</span><br></pre></td></tr></table></figure>

<h3 id="1-4-5-users-serializers-py"><a href="#1-4-5-users-serializers-py" class="headerlink" title="1.4.5 users/serializers.py"></a>1.4.5 users/serializers.py</h3><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">from</span> rest_framework_jwt.settings <span class="keyword">import</span> api_settings</span><br><span class="line"><span class="keyword">from</span> rest_framework <span class="keyword">import</span> serializers</span><br><span class="line"><span class="keyword">from</span> users.models <span class="keyword">import</span> User</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">UserSerializer</span><span class="params">(serializers.Serializer)</span>:</span></span><br><span class="line">    username = serializers.CharField()</span><br><span class="line">    password = serializers.CharField()</span><br><span class="line">    phone = serializers.CharField()</span><br><span class="line">    token = serializers.CharField(read_only=<span class="literal">True</span>)</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">create</span><span class="params">(self, data)</span>:</span></span><br><span class="line">        user = User.objects.create(**data)</span><br><span class="line">        user.set_password(data.get(<span class="string">'password'</span>))</span><br><span class="line">        user.save()</span><br><span class="line">        <span class="comment"># 补充生成记录登录状态的token</span></span><br><span class="line">        jwt_payload_handler = api_settings.JWT_PAYLOAD_HANDLER</span><br><span class="line">        jwt_encode_handler = api_settings.JWT_ENCODE_HANDLER</span><br><span class="line">        payload = jwt_payload_handler(user)</span><br><span class="line">        token = jwt_encode_handler(payload)</span><br><span class="line">        user.token = token</span><br><span class="line">        <span class="keyword">return</span> user</span><br></pre></td></tr></table></figure>

<h3 id="1-4-6-users-views-py"><a href="#1-4-6-users-views-py" class="headerlink" title="1.4.6 users/views.py"></a>1.4.6 users/views.py</h3><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">from</span> django.shortcuts <span class="keyword">import</span> render</span><br><span class="line"><span class="keyword">import</span> json</span><br><span class="line"><span class="keyword">from</span> rest_framework.views <span class="keyword">import</span> </span><br><span class="line"><span class="keyword">from</span> rest_framework.views <span class="keyword">import</span> Response</span><br><span class="line"><span class="keyword">from</span> rest_framework.permissions <span class="keyword">import</span> IsAuthenticated</span><br><span class="line"><span class="keyword">from</span> rest_framework_jwt.authentication <span class="keyword">import</span> JSONWebTokenAuthentication</span><br><span class="line"><span class="keyword">from</span> users.serializers <span class="keyword">import</span> UserSerializer</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment"># 用户注册</span></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">RegisterView</span><span class="params">()</span>:</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">post</span><span class="params">(self, request, *args, **kwargs)</span>:</span></span><br><span class="line">        serializer = UserSerializer(data=request.data)</span><br><span class="line">        <span class="keyword">if</span> serializer.is_valid():</span><br><span class="line">            serializer.save()</span><br><span class="line">            <span class="keyword">return</span> Response(serializer.data, status=<span class="number">201</span>)</span><br><span class="line">        <span class="keyword">return</span> Response(serializer.errors, status=<span class="number">400</span>)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment"># 重新用户登录返回函数</span></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">jwt_response_payload_handler</span><span class="params">(token, user=None, request=None)</span>:</span></span><br><span class="line">    <span class="string">'''</span></span><br><span class="line"><span class="string">    :param token: jwt生成的token值</span></span><br><span class="line"><span class="string">    :param user: User对象</span></span><br><span class="line"><span class="string">    :param request: 请求</span></span><br><span class="line"><span class="string">    '''</span></span><br><span class="line">    <span class="keyword">return</span> &#123;</span><br><span class="line">        <span class="string">'token'</span>: token,</span><br><span class="line">        <span class="string">'user'</span>: user.username,</span><br><span class="line">        <span class="string">'userid'</span>: user.id</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment"># 测试必须携带token才能访问接口</span></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">UserList</span><span class="params">()</span>:</span></span><br><span class="line">    permission_classes = [IsAuthenticated]  <span class="comment"># 接口中加权限</span></span><br><span class="line">    authentication_classes = [JSONWebTokenAuthentication]</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">get</span><span class="params">(self,request, *args, **kwargs)</span>:</span></span><br><span class="line">        print(request.META.get(<span class="string">'HTTP_AUTHORIZATION'</span>, <span class="literal">None</span>))</span><br><span class="line">        <span class="keyword">return</span> Response(&#123;<span class="string">'name'</span>:<span class="string">'zhangsan'</span>&#125;)</span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">post</span><span class="params">(self,request, *args, **kwargs)</span>:</span></span><br><span class="line">        <span class="keyword">return</span> Response(&#123;<span class="string">'name'</span>:<span class="string">'zhangsan'</span>&#125;)</span><br></pre></td></tr></table></figure>

<h3 id="1-4-7-测试JWT接口"><a href="#1-4-7-测试JWT接口" class="headerlink" title="1.4.7 测试JWT接口"></a>1.4.7 测试JWT接口</h3><blockquote>
<p>Authorization       JWT xxxxxxxx  （JWT+空格+token）</p>
</blockquote>
<p><img src="assets/1566782968605.png" alt="1566782968605"></p>
<h2 id="1-5-CORS配置"><a href="#1-5-CORS配置" class="headerlink" title="1.5 CORS配置"></a>1.5 CORS配置</h2><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#1、指定允许的hosts，否则通过 http://jack.com:8888/index/ 无法访问jack_django程序</span></span><br><span class="line">ALLOWED_HOSTS = [<span class="string">'*'</span>]</span><br><span class="line"></span><br><span class="line"><span class="comment">#2、将corsheaders 注册到app中</span></span><br><span class="line">INSTALLED_APPS = [</span><br><span class="line">    <span class="string">'django.contrib.admin'</span>,</span><br><span class="line">    <span class="string">'django.contrib.auth'</span>,</span><br><span class="line">    <span class="string">'django.contrib.contenttypes'</span>,</span><br><span class="line">    <span class="string">'django.contrib.sessions'</span>,</span><br><span class="line">    <span class="string">'django.contrib.messages'</span>,</span><br><span class="line">    <span class="string">'django.contrib.staticfiles'</span>,</span><br><span class="line">    <span class="string">'corsheaders'</span>,</span><br><span class="line">    <span class="string">'app01'</span>,</span><br><span class="line">]</span><br><span class="line"></span><br><span class="line"><span class="comment">#3、将下面两条添加到中间件重</span></span><br><span class="line">MIDDLEWARE = [</span><br><span class="line">    <span class="string">'corsheaders.middleware.CorsMiddleware'</span>,</span><br><span class="line">    <span class="string">'django.middleware.common.CommonMiddleware'</span>,</span><br><span class="line">]</span><br><span class="line"></span><br><span class="line"><span class="comment">#4、配置 django-cors-headers 中的参数</span></span><br><span class="line">CORS_ALLOW_CREDENTIALS = <span class="literal">True</span></span><br><span class="line">CORS_ORIGIN_ALLOW_ALL = <span class="literal">True</span></span><br><span class="line"><span class="comment"># CORS_ORIGIN_WHITELIST = (</span></span><br><span class="line"><span class="comment">#     '*',</span></span><br><span class="line"><span class="comment"># )</span></span><br><span class="line"></span><br><span class="line">CORS_ALLOW_METHODS = (</span><br><span class="line">    <span class="string">'DELETE'</span>,</span><br><span class="line">    <span class="string">'GET'</span>,</span><br><span class="line">    <span class="string">'OPTIONS'</span>,</span><br><span class="line">    <span class="string">'PATCH'</span>,</span><br><span class="line">    <span class="string">'POST'</span>,</span><br><span class="line">    <span class="string">'PUT'</span>,</span><br><span class="line">    <span class="string">'VIEW'</span>,</span><br><span class="line">)</span><br><span class="line"></span><br><span class="line">CORS_ALLOW_HEADERS = (</span><br><span class="line">    <span class="string">'XMLHttpRequest'</span>,</span><br><span class="line">    <span class="string">'X_FILENAME'</span>,</span><br><span class="line">    <span class="string">'accept-encoding'</span>,</span><br><span class="line">    <span class="string">'authorization'</span>,</span><br><span class="line">    <span class="string">'content-type'</span>,</span><br><span class="line">    <span class="string">'dnt'</span>,</span><br><span class="line">    <span class="string">'origin'</span>,</span><br><span class="line">    <span class="string">'user-agent'</span>,</span><br><span class="line">    <span class="string">'x-csrftoken'</span>,</span><br><span class="line">    <span class="string">'x-requested-with'</span>,</span><br><span class="line">    <span class="string">'Pragma'</span>,</span><br><span class="line">)</span><br></pre></td></tr></table></figure>

<h1 id="02-vue使用"><a href="#02-vue使用" class="headerlink" title="02. vue使用"></a>02. vue使用</h1><h2 id="2-1-vue基础"><a href="#2-1-vue基础" class="headerlink" title="2.1 vue基础"></a>2.1 vue基础</h2><h3 id="2-1-1-vue常用指令"><a href="#2-1-1-vue常用指令" class="headerlink" title="2.1.1 vue常用指令"></a>2.1.1 vue常用指令</h3><blockquote>
<ol>
<li>Vue是基于MVVM模式实现的</li>
</ol>
</blockquote>
<ul>
<li>M：model表示模型，机器可读性强的数据</li>
<li>V：view表示视图，人眼可读性强的数据</li>
<li>VM：viewModel表示视图模型，将机器可读性强的数据转化成人眼可读性强的数据</li>
</ul>
<blockquote>
<ol start="2">
<li>v-if/v-else-if/v-else</li>
</ol>
</blockquote>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">&lt;div id=<span class="string">"app"</span>&gt;</span><br><span class="line">	&lt;div v-<span class="keyword">if</span>=<span class="string">"type === 'A'"</span>&gt;</span><br><span class="line">	  A</span><br><span class="line">	&lt;<span class="regexp">/div&gt;</span></span><br><span class="line"><span class="regexp">	&lt;div v-else-if="type === 'B'"&gt;</span></span><br><span class="line"><span class="regexp">	  B</span></span><br><span class="line"><span class="regexp">	&lt;/</span>div&gt;</span><br><span class="line">	&lt;div v-<span class="keyword">else</span>&gt;</span><br><span class="line">	  Not A/B/C</span><br><span class="line">	&lt;<span class="regexp">/div&gt;</span></span><br><span class="line"><span class="regexp">&lt;/</span>div&gt;</span><br></pre></td></tr></table></figure>

<blockquote>
<ol start="3">
<li>v-for</li>
</ol>
</blockquote>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">&lt;ul&gt;</span><br><span class="line">    &lt;li v-<span class="keyword">for</span>=<span class="string">"(item, index) in list"</span>&gt;&#123;&#123;index&#125;&#125;--&#123;&#123;item&#125;&#125;&lt;<span class="regexp">/li&gt;</span></span><br><span class="line"><span class="regexp">&lt;/u</span>l&gt;</span><br></pre></td></tr></table></figure>

<h2 id="2-2-路由使用"><a href="#2-2-路由使用" class="headerlink" title="2.2 路由使用"></a>2.2 路由使用</h2><h3 id="2-2-1-路由基本使用"><a href="#2-2-1-路由基本使用" class="headerlink" title="2.2.1 路由基本使用"></a>2.2.1 路由基本使用</h3><blockquote>
<ol>
<li>定义路由</li>
</ol>
</blockquote>
<ul>
<li>定义组件分成三步：1 定义组件容器元素， 2 定义组件类， 3 注册组件</li>
<li>当使用路由的时候，这三步就抽象成一步，我们只需要定义一个组件类参数对象即可</li>
<li>所以使用路由，让我们定义组件变得简单了，这里的组件对象，只能被路由使用</li>
</ul>
<blockquote>
<ol start="2">
<li>路由使用分成以下三步</li>
</ol>
</blockquote>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="string">'''1. 第一步 定义路由规则'''</span></span><br><span class="line"><span class="comment"># 1. var routes = [&#123;&#125;, &#123;&#125;]，每一个参数代表一个路由对象</span></span><br><span class="line"><span class="comment"># 2. path定义规则；name定义路由名称；component 表示路由的组件：这里使用组件对象</span></span><br><span class="line"></span><br><span class="line"><span class="string">'''2. 第二步 实例化路由对象'''</span></span><br><span class="line"><span class="comment"># 1. 实例化时候，我们要添加路由规则</span></span><br><span class="line"></span><br><span class="line"><span class="string">'''3. 第三步 在vue实例化对象中，注册路由'''</span></span><br><span class="line"><span class="comment"># 1. 第一件事 注册路由</span></span><br><span class="line"><span class="comment"># 2. 第二件事 定义路由渲染的容器（在模板中） router-view，渲染的时候，router-view会自动删除</span></span><br></pre></td></tr></table></figure>

<blockquote>
<p><strong>3.  注：</strong>在访问的url后面加上 <strong>#/home、#/detail、#/list</strong> 就会显示对应的组件内容</p>
</blockquote>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;!DOCTYPE html&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">html</span> <span class="attr">lang</span>=<span class="string">"en"</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">head</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">meta</span> <span class="attr">charset</span>=<span class="string">"UTF-8"</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">meta</span> <span class="attr">http-equiv</span>=<span class="string">"x-ua-compatible"</span> <span class="attr">content</span>=<span class="string">"IE=edge"</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">meta</span> <span class="attr">name</span>=<span class="string">"viewport"</span> <span class="attr">content</span>=<span class="string">"width=device-width, initial-scale=1"</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">title</span>&gt;</span>Title<span class="tag">&lt;/<span class="name">title</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">head</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">id</span>=<span class="string">"app"</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">h1</span>&gt;</span>vue实例化对象<span class="tag">&lt;/<span class="name">h1</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">router-view</span>&gt;</span><span class="tag">&lt;/<span class="name">router-view</span>&gt;</span>        <span class="comment">&lt;!--定义渲染容器--&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;<span class="name">script</span> <span class="attr">type</span>=<span class="string">"text/javascript"</span> <span class="attr">src</span>=<span class="string">"vue.js"</span>&gt;</span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">script</span> <span class="attr">type</span>=<span class="string">"text/javascript"</span> <span class="attr">src</span>=<span class="string">"vue-router.js"</span>&gt;</span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">script</span>&gt;</span></span><br><span class="line"><span class="javascript">        <span class="keyword">var</span> Home = &#123;</span></span><br><span class="line"><span class="xml">            template:'<span class="tag">&lt;<span class="name">h1</span>&gt;</span>home<span class="tag">&lt;/<span class="name">h1</span>&gt;</span>'</span></span><br><span class="line">        &#125;;</span><br><span class="line"><span class="javascript">        <span class="keyword">var</span> List = &#123;</span></span><br><span class="line"><span class="xml">            template:'<span class="tag">&lt;<span class="name">h1</span>&gt;</span>list &#123;&#123;msg&#125;&#125;<span class="tag">&lt;/<span class="name">h1</span>&gt;</span>',</span></span><br><span class="line"><span class="javascript">            data:<span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span></span><br><span class="line"><span class="javascript">                <span class="keyword">return</span> &#123;</span></span><br><span class="line"><span class="javascript">                    msg: <span class="string">'hello'</span></span></span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;;</span><br><span class="line"><span class="javascript">        <span class="keyword">var</span> Detail = &#123;</span></span><br><span class="line"><span class="xml">            template:'<span class="tag">&lt;<span class="name">h1</span>&gt;</span>detail<span class="tag">&lt;/<span class="name">h1</span>&gt;</span>',</span></span><br><span class="line">        &#125;;</span><br><span class="line"></span><br><span class="line"><span class="javascript">        <span class="comment">// 第一步：定义路由规则</span></span></span><br><span class="line"><span class="javascript">        <span class="keyword">var</span> routes = [</span></span><br><span class="line">            &#123;</span><br><span class="line"><span class="javascript">                path:<span class="string">'/home'</span>,</span></span><br><span class="line"><span class="javascript">                name:<span class="string">'home'</span>,</span></span><br><span class="line">                component:Home</span><br><span class="line">            &#125;,</span><br><span class="line">            &#123;</span><br><span class="line"><span class="javascript">                path:<span class="string">'/list'</span>,</span></span><br><span class="line"><span class="javascript">                name:<span class="string">'list'</span>,</span></span><br><span class="line">                component:List</span><br><span class="line">            &#125;,</span><br><span class="line">            &#123;</span><br><span class="line"><span class="javascript">                path:<span class="string">'/detail'</span>,</span></span><br><span class="line"><span class="javascript">                name:<span class="string">'detail'</span>,</span></span><br><span class="line">                component:Detail</span><br><span class="line">            &#125;,</span><br><span class="line">        ];</span><br><span class="line"></span><br><span class="line"><span class="javascript">        <span class="comment">// 第二步：实例化路由对象</span></span></span><br><span class="line"><span class="javascript">        <span class="keyword">var</span> router = <span class="keyword">new</span> VueRouter(&#123;</span></span><br><span class="line">            routes:routes</span><br><span class="line">        &#125;);</span><br><span class="line"></span><br><span class="line"><span class="javascript">        <span class="comment">// 第三步：在vue实例化对象中注册路由</span></span></span><br><span class="line"><span class="javascript">        <span class="keyword">var</span> app = <span class="keyword">new</span> Vue(&#123;</span></span><br><span class="line"><span class="javascript">            el:<span class="string">'#app'</span>,</span></span><br><span class="line">            router:router</span><br><span class="line">        &#125;)</span><br><span class="line">    <span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></span><br></pre></td></tr></table></figure>

<h3 id="2-2-2-嵌套路由"><a href="#2-2-2-嵌套路由" class="headerlink" title="2.2.2 嵌套路由"></a>2.2.2 嵌套路由</h3><blockquote>
<ol>
<li>嵌套路由举例</li>
</ol>
</blockquote>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 1. 如果路径后加上  #/home 仅显示home页面组件</span></span><br><span class="line"><span class="comment"># 2. 如果路径加上 #/home/search 会同时显示home组价和子组件 search组件中内容</span></span><br><span class="line"><span class="comment"># 3. 由于 page子路由中写的是绝对路径 '/page' 所以访问路径变成 #/page 而不用加上父路径home，显示home组件和page组件</span></span><br></pre></td></tr></table></figure>

<blockquote>
<ol start="2">
<li>嵌套路由使用举例</li>
</ol>
</blockquote>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;!DOCTYPE html&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">html</span> <span class="attr">lang</span>=<span class="string">"en"</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">head</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">meta</span> <span class="attr">charset</span>=<span class="string">"UTF-8"</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">meta</span> <span class="attr">http-equiv</span>=<span class="string">"x-ua-compatible"</span> <span class="attr">content</span>=<span class="string">"IE=edge"</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">meta</span> <span class="attr">name</span>=<span class="string">"viewport"</span> <span class="attr">content</span>=<span class="string">"width=device-width, initial-scale=1"</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">title</span>&gt;</span>Title<span class="tag">&lt;/<span class="name">title</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">head</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">id</span>=<span class="string">"app"</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">h1</span>&gt;</span>vue实例化对象<span class="tag">&lt;/<span class="name">h1</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">router-view</span>&gt;</span><span class="tag">&lt;/<span class="name">router-view</span>&gt;</span>        <span class="comment">&lt;!--定义渲染容器--&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;<span class="name">template</span> <span class="attr">id</span>=<span class="string">"home"</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">div</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">h1</span>&gt;</span>home<span class="tag">&lt;/<span class="name">h1</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">router-view</span>&gt;</span><span class="tag">&lt;/<span class="name">router-view</span>&gt;</span>       <span class="comment">&lt;!--第一步：定义子路由渲染的容器--&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">template</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;<span class="name">script</span> <span class="attr">type</span>=<span class="string">"text/javascript"</span> <span class="attr">src</span>=<span class="string">"vue.js"</span>&gt;</span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">script</span> <span class="attr">type</span>=<span class="string">"text/javascript"</span> <span class="attr">src</span>=<span class="string">"vue-router.js"</span>&gt;</span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">script</span>&gt;</span></span><br><span class="line"><span class="javascript">        <span class="keyword">var</span> Home = &#123;</span></span><br><span class="line"><span class="javascript">            template:<span class="string">'#home'</span>,</span></span><br><span class="line"><span class="javascript">            <span class="comment">// 添加子路由</span></span></span><br><span class="line">        &#125;;</span><br><span class="line"><span class="javascript">        <span class="keyword">var</span> Page = &#123;</span></span><br><span class="line"><span class="xml">            template: '<span class="tag">&lt;<span class="name">h2</span>&gt;</span>page<span class="tag">&lt;/<span class="name">h2</span>&gt;</span>'</span></span><br><span class="line">        &#125;;</span><br><span class="line"></span><br><span class="line"><span class="javascript">        <span class="comment">// 第一步：定义路由规则</span></span></span><br><span class="line"><span class="javascript">        <span class="keyword">var</span> routes = [</span></span><br><span class="line">            &#123;</span><br><span class="line"><span class="javascript">                path:<span class="string">'/home'</span>,</span></span><br><span class="line"><span class="javascript">                name:<span class="string">'home'</span>,</span></span><br><span class="line">                component:Home,</span><br><span class="line">                children:[</span><br><span class="line"><span class="javascript">                    &#123;<span class="attr">path</span>:<span class="string">'/page'</span>,<span class="attr">component</span>:Page&#125;,    <span class="comment">// 如果子路由的路径是绝对路径，结果就是该绝对路径</span></span></span><br><span class="line"><span class="javascript">                    &#123;<span class="attr">path</span>:<span class="string">'search'</span>,<span class="attr">component</span>:&#123;<span class="attr">template</span>:<span class="string">'&lt;h2&gt;search&lt;/h2&gt;'</span>&#125;&#125;,   </span></span><br><span class="line"><span class="javascript">                    <span class="comment">// 如果子路由的路径是相对路径，结果就是父路径+子路径</span></span></span><br><span class="line">                ]</span><br><span class="line">            &#125;</span><br><span class="line">        ];</span><br><span class="line"></span><br><span class="line"><span class="javascript">        <span class="comment">// 第二步：实例化路由对象</span></span></span><br><span class="line"><span class="javascript">        <span class="keyword">var</span> router = <span class="keyword">new</span> VueRouter(&#123;</span></span><br><span class="line">            routes:routes</span><br><span class="line">        &#125;);</span><br><span class="line"></span><br><span class="line"><span class="javascript">        <span class="comment">// 第三步：在vue实例化对象中注册路由</span></span></span><br><span class="line"><span class="javascript">        <span class="keyword">var</span> app = <span class="keyword">new</span> Vue(&#123;</span></span><br><span class="line"><span class="javascript">            el:<span class="string">'#app'</span>,</span></span><br><span class="line">            router:router</span><br><span class="line">        &#125;)</span><br><span class="line">    <span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></span><br></pre></td></tr></table></figure>

<p><img src="assets/1566830662289.png" alt="1566830662289"></p>
<h3 id="2-2-3-路由传参"><a href="#2-2-3-路由传参" class="headerlink" title="2.2.3 路由传参"></a>2.2.3 路由传参</h3><blockquote>
<ol>
<li>路由参数说明</li>
</ol>
</blockquote>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 1. 一个 "/" 将路由切割成一个一个模块，这些模块默认都是静态路由</span></span><br><span class="line"><span class="comment"># 2. 静态路由是不能变的，一个规则对应一个路径</span></span><br><span class="line"><span class="comment"># 3. 动态路由：一个规则对应多个路径</span></span><br><span class="line"><span class="comment"># 4. 例如 /page/:pageNum </span></span><br><span class="line"> 　　匹配： /page/<span class="number">10</span>, /page/<span class="number">100</span>, /page/hello</span><br><span class="line"> 　　不匹配： /list/<span class="number">10</span>, /page/<span class="number">10</span>/abc</span><br><span class="line"><span class="comment"># 5. 获取路由参数：</span></span><br><span class="line">	$route.params.id </span><br><span class="line">    $route.query.word </span><br><span class="line">	<span class="comment"># 只有像这样 #/detail/20?word=hello 才可以访问 </span></span><br><span class="line"><span class="comment"># 6. http://127.0.0.1:8080/manage/flowconf/456/</span></span><br><span class="line">	/manage/flowconf/:id</span><br><span class="line">	$route.params.id </span><br><span class="line"><span class="comment"># http://127.0.0.1:8080/manage/flowconf/?id=456</span></span><br><span class="line">	$route.query.word</span><br></pre></td></tr></table></figure>

<blockquote>
<ol start="2">
<li>路由传参应用举例</li>
</ol>
</blockquote>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;!DOCTYPE html&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">html</span> <span class="attr">lang</span>=<span class="string">"en"</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">head</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">meta</span> <span class="attr">charset</span>=<span class="string">"UTF-8"</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">meta</span> <span class="attr">http-equiv</span>=<span class="string">"x-ua-compatible"</span> <span class="attr">content</span>=<span class="string">"IE=edge"</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">meta</span> <span class="attr">name</span>=<span class="string">"viewport"</span> <span class="attr">content</span>=<span class="string">"width=device-width, initial-scale=1"</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">title</span>&gt;</span>Title<span class="tag">&lt;/<span class="name">title</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">head</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">id</span>=<span class="string">"app"</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">h1</span>&gt;</span>vue实例化对象<span class="tag">&lt;/<span class="name">h1</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">router-view</span>&gt;</span><span class="tag">&lt;/<span class="name">router-view</span>&gt;</span>        <span class="comment">&lt;!--定义渲染容器--&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;<span class="name">script</span> <span class="attr">type</span>=<span class="string">"text/javascript"</span> <span class="attr">src</span>=<span class="string">"vue.js"</span>&gt;</span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">script</span> <span class="attr">type</span>=<span class="string">"text/javascript"</span> <span class="attr">src</span>=<span class="string">"vue-router.js"</span>&gt;</span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">script</span>&gt;</span></span><br><span class="line"><span class="javascript">        <span class="keyword">var</span> Detail = &#123;</span></span><br><span class="line"><span class="xml">            template:'<span class="tag">&lt;<span class="name">h1</span>&gt;</span>detail --- &#123;&#123;$route.params.id&#125;&#125;---&#123;&#123;$route.query.word&#125;&#125;<span class="tag">&lt;/<span class="name">h1</span>&gt;</span>',</span></span><br><span class="line">        &#125;;</span><br><span class="line"></span><br><span class="line"><span class="javascript">        <span class="comment">// 第一步：定义路由规则</span></span></span><br><span class="line"><span class="javascript">        <span class="keyword">var</span> routes = [</span></span><br><span class="line">            &#123;</span><br><span class="line"><span class="javascript">                <span class="comment">// 多个商品对应一个页面</span></span></span><br><span class="line"><span class="javascript">                path:<span class="string">'/detail/:id'</span>,</span></span><br><span class="line"><span class="javascript">                name:<span class="string">'detail'</span>,</span></span><br><span class="line">                component:Detail</span><br><span class="line">            &#125;</span><br><span class="line">        ];</span><br><span class="line"></span><br><span class="line"><span class="javascript">        <span class="comment">// 第二步：实例化路由对象</span></span></span><br><span class="line"><span class="javascript">        <span class="keyword">var</span> router = <span class="keyword">new</span> VueRouter(&#123;</span></span><br><span class="line">            routes:routes</span><br><span class="line">        &#125;);</span><br><span class="line"></span><br><span class="line"><span class="javascript">        <span class="comment">// 第三步：在vue实例化对象中注册路由</span></span></span><br><span class="line"><span class="javascript">        <span class="keyword">var</span> app = <span class="keyword">new</span> Vue(&#123;</span></span><br><span class="line"><span class="javascript">            el:<span class="string">'#app'</span>,</span></span><br><span class="line">            router:router</span><br><span class="line">        &#125;)</span><br><span class="line">    <span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></span><br></pre></td></tr></table></figure>

<p>​    <img src="assets/1566878579775.png" alt="1566878579775"></p>
<h3 id="2-2-4-路由重定向"><a href="#2-2-4-路由重定向" class="headerlink" title="2.2.4 路由重定向"></a>2.2.4 路由重定向</h3><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">        path:<span class="string">'*'</span>,</span><br><span class="line">        redirect:<span class="string">'/home'</span>  // 重定向</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="2-2-5-路由导航：router-link"><a href="#2-2-5-路由导航：router-link" class="headerlink" title="2.2.5 路由导航：router-link"></a>2.2.5 路由导航：router-link</h3><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">id</span>=<span class="string">"app"</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!--&lt;a href="#/list"&gt;列表页&lt;/a&gt;--&gt;</span></span><br><span class="line">    <span class="comment">&lt;!--&lt;a href="#/detail"&gt;详情页&lt;/a&gt;--&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">router-link</span> <span class="attr">:to</span>=<span class="string">"'/list'"</span> <span class="attr">v-text</span>=<span class="string">"'列表页01'"</span> <span class="attr">tag</span>=<span class="string">"span"</span>&gt;</span><span class="tag">&lt;/<span class="name">router-link</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">router-link</span> <span class="attr">:to</span>=<span class="string">"'/detail'"</span> <span class="attr">v-text</span>=<span class="string">"'详情页01'"</span>&gt;</span><span class="tag">&lt;/<span class="name">router-link</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br></pre></td></tr></table></figure>

<h2 id="2-3-vue组件"><a href="#2-3-vue组件" class="headerlink" title="2.3 vue组件"></a>2.3 <a href="https://www.cnblogs.com/xiaonq/p/9685234.html" target="_blank" rel="noopener">vue组件</a></h2><h3 id="2-3-1-初识组件"><a href="#2-3-1-初识组件" class="headerlink" title="2.3.1 初识组件"></a>2.3.1 初识组件</h3><blockquote>
<ol>
<li><strong>什么是组件</strong></li>
</ol>
</blockquote>
<p>​    1. <strong>Html中有组件:</strong> 是一段可以被复用的结构代码</p>
<p>​    2. <strong>Css中有组件:</strong> 是一段可以被复用的样式</p>
<p>​    3. <strong>Js中有组件:</strong> 是一段可以被复用的功能</p>
<p>​    4. <strong>Vue中也有组件:</strong> 指的就是一个模块，是一个独立的，完整的（包含html，css，js等），可以直接拿来用的</p>
<blockquote>
<ol start="2">
<li><strong>使用组件分成三步</strong></li>
</ol>
</blockquote>
<ul>
<li>第一步 定义组件容器（定义自定义元素）</li>
<li>第二步 定义组件Vue.extend方法</li>
<li>第三步 将组件注册到页面中 Vue.component</li>
</ul>
<blockquote>
<ol start="3">
<li><strong>组件特性</strong></li>
</ol>
</blockquote>
<ul>
<li>组件的实例化对象，跟vue实例化对象一样，因此，我们也可以将vue实例化对象看成组件</li>
<li>组件间是独立的，因此数据要独立存储，方法要独立定义，彼此间不能共享。</li>
</ul>
<blockquote>
<ol start="4">
<li>定义一个最简单组件</li>
</ol>
</blockquote>
<p>​    <img src="assets/1566888184199.png" alt="1566888184199"></p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;!DOCTYPE html&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">html</span> <span class="attr">lang</span>=<span class="string">"en"</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">head</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">meta</span> <span class="attr">charset</span>=<span class="string">"UTF-8"</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">meta</span> <span class="attr">http-equiv</span>=<span class="string">"x-ua-compatible"</span> <span class="attr">content</span>=<span class="string">"IE=edge"</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">meta</span> <span class="attr">name</span>=<span class="string">"viewport"</span> <span class="attr">content</span>=<span class="string">"width=device-width, initial-scale=1"</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">title</span>&gt;</span>Title<span class="tag">&lt;/<span class="name">title</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">head</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">id</span>=<span class="string">"app"</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">Home</span>&gt;</span><span class="tag">&lt;/<span class="name">Home</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;<span class="name">script</span> <span class="attr">src</span>=<span class="string">"vue.js"</span>&gt;</span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">script</span>&gt;</span></span><br><span class="line"><span class="javascript">        <span class="keyword">var</span> Home = Vue.extend(&#123;</span></span><br><span class="line"><span class="xml">           template:"<span class="tag">&lt;<span class="name">h1</span>&gt;</span>I am h1!! 显示变量： &#123;&#123;msg&#125;&#125;<span class="tag">&lt;/<span class="name">h1</span>&gt;</span>",</span></span><br><span class="line"><span class="javascript">           data:<span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span></span><br><span class="line"><span class="javascript">                <span class="keyword">return</span> &#123;</span></span><br><span class="line"><span class="javascript">                    <span class="string">'msg'</span>:<span class="string">'I am msg'</span></span></span><br><span class="line">                &#125;</span><br><span class="line">           &#125;</span><br><span class="line">        &#125;);</span><br><span class="line"></span><br><span class="line"><span class="javascript">        Vue.component(<span class="string">'home'</span>,Home);</span></span><br><span class="line"></span><br><span class="line"><span class="javascript">        <span class="keyword">var</span> app = <span class="keyword">new</span> Vue(&#123;</span></span><br><span class="line"><span class="javascript">            el:<span class="string">'#app'</span>,</span></span><br><span class="line">            data:&#123;&#125;</span><br><span class="line">        &#125;)</span><br><span class="line">    <span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></span><br></pre></td></tr></table></figure>

<h3 id="2-3-2-父子组件通信"><a href="#2-3-2-父子组件通信" class="headerlink" title="2.3.2 父子组件通信"></a>2.3.2 父子组件通信</h3><blockquote>
<ol>
<li>父子组件定义</li>
</ol>
</blockquote>
<ul>
<li><strong>父组件子组件：</strong>如果你在一个组件A里面，用到了另外一个组件B，那么B就是A的子组件，A就是B的父组件</li>
</ul>
<blockquote>
<ol start="2">
<li>父组件向子组件通信：分为以下两步</li>
</ol>
</blockquote>
<p><code>第一步</code></p>
<ol>
<li><p>在组件容器元素上，定义自定义属性，属性值可以传递父组件中的数据</p>
</li>
<li><p>如果属性使用了v-bind指令，属性值就是js环境</p>
</li>
<li><p>如果属性没有使用v-bind指令，属性值就是字符串</p>
<p>例：<ickt demo="hello" v-bind:parent-msg="msg"></ickt>     # hello 是字符串，  msg是变量    </p>
</li>
</ol>
<p><code>第二步</code></p>
<pre><code>1. 在组件中定义props属性，属性值是数组，每一个成员代表组件容器元素上的一个属性
   2. **作用：**将属性作为变量，注册在子组件中，可以在子组件中使用（包括模板）</code></pre><blockquote>
<ol start="3">
<li>例子说明</li>
</ol>
</blockquote>
<p>   　　　　　　1. 在当页面中注册了子组件：Ickt，在子组件中是无法使用父组件中定义的数据 msg 的<br>            　　　　　　2.  如果想要在子组件Ickt中使用父组件的 msg 变量，可以使用 <ickt v-bind:parent-msg="msg"></ickt><br>            　　　　　　3. 在子组件中 使用NaN 就可以访问父组件的msg变量了</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;!DOCTYPE html&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">html</span> <span class="attr">lang</span>=<span class="string">"en"</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">head</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">meta</span> <span class="attr">charset</span>=<span class="string">"UTF-8"</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">title</span>&gt;</span><span class="tag">&lt;/<span class="name">title</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">head</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">id</span>=<span class="string">"app"</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">"text"</span> <span class="attr">v-model</span>=<span class="string">"msg"</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">h1</span> @<span class="attr">click</span>=<span class="string">"clickH1"</span>&gt;</span>vue:&#123;&#123;msg&#125;&#125;<span class="tag">&lt;/<span class="name">h1</span>&gt;</span></span><br><span class="line"></span><br><span class="line">        <span class="comment">&lt;!-- 1 容器 第一步 绑定属性   demo 没有使用v-bind所以是字符串 --&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">ickt</span> <span class="attr">demo</span>=<span class="string">"hello"</span> <span class="attr">v-bind:parentmsg</span>=<span class="string">"msg"</span>&gt;</span><span class="tag">&lt;/<span class="name">ickt</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">template</span> <span class="attr">id</span>=<span class="string">"tpl"</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">div</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">"text"</span> <span class="attr">v-model</span>=<span class="string">"childMsg"</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">h1</span> @<span class="attr">click</span>=<span class="string">"clickChildH1"</span>&gt;</span>demo: &#123;&#123;childMsg&#125;&#125;<span class="tag">&lt;/<span class="name">h1</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">h2</span>&gt;</span>&#123;&#123;demo&#125;&#125;<span class="tag">&lt;/<span class="name">h2</span>&gt;</span>             <span class="comment">&lt;!-- demo 是父组件中的字符串 --&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">h3</span>&gt;</span>&#123;&#123;parentmsg&#125;&#125;<span class="tag">&lt;/<span class="name">h3</span>&gt;</span>        <span class="comment">&lt;!-- parentmsg 是父组件中的变量 --&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">template</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">script</span> <span class="attr">type</span>=<span class="string">"text/javascript"</span> <span class="attr">src</span>=<span class="string">"vue.js"</span>&gt;</span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">script</span> <span class="attr">type</span>=<span class="string">"text/javascript"</span>&gt;</span></span><br><span class="line"><span class="javascript">        <span class="comment">// 2 组件类</span></span></span><br><span class="line"><span class="javascript">        <span class="keyword">var</span> Ickt = Vue.extend(&#123;            <span class="comment">// 第二步 注册属性变量</span></span></span><br><span class="line"><span class="javascript">            props: [<span class="string">'demo'</span>, <span class="string">'parentmsg'</span>],</span></span><br><span class="line"><span class="javascript">            template: <span class="string">'#tpl'</span>,</span></span><br><span class="line"><span class="javascript">            data: <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;             <span class="comment">// 绑定数据</span></span></span><br><span class="line"><span class="javascript">                <span class="keyword">return</span> &#123;</span></span><br><span class="line"><span class="javascript">                    childMsg: <span class="string">''</span></span></span><br><span class="line">                &#125;</span><br><span class="line">            &#125;,</span><br><span class="line"><span class="javascript">            methods: &#123;                     <span class="comment">// 绑定事件</span></span></span><br><span class="line"><span class="javascript">                clickChildH1: <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span></span><br><span class="line"><span class="javascript">                    <span class="built_in">console</span>.log(<span class="number">222</span>)</span></span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;);</span><br><span class="line"></span><br><span class="line"><span class="javascript">        <span class="comment">// 3 注册</span></span></span><br><span class="line"><span class="javascript">        Vue.component(<span class="string">'ickt'</span>, Ickt);    <span class="comment">// 创建vue实例化对象： 父组件</span></span></span><br><span class="line"></span><br><span class="line"><span class="javascript">        <span class="keyword">var</span> app = <span class="keyword">new</span> Vue(&#123;</span></span><br><span class="line"><span class="javascript">            el: <span class="string">'#app'</span>,</span></span><br><span class="line">            data: &#123;</span><br><span class="line"><span class="javascript">                msg: <span class="string">''</span></span></span><br><span class="line">            &#125;,</span><br><span class="line"><span class="javascript">            methods: &#123;                    <span class="comment">// 定义方法</span></span></span><br><span class="line"><span class="javascript">                clickH1: <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span></span><br><span class="line"><span class="javascript">                    <span class="built_in">console</span>.log(<span class="number">1111</span>)</span></span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;)</span><br><span class="line">    <span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></span><br></pre></td></tr></table></figure>

<h3 id="2-3-4-组件的生命周期"><a href="#2-3-4-组件的生命周期" class="headerlink" title="2.3.4 组件的生命周期"></a>2.3.4 组件的生命周期</h3><blockquote>
<ol>
<li><strong>组件说明</strong></li>
</ol>
</blockquote>
<p>   　　　　　　1. Vue将组件看成是一个有生命的个体，跟人一样，定义了各个阶段，<br>            　　　　　　2.  组件的生命周期：组件的创建过程<br>            　　　　　　3. 组件生命周期钩子函数：当组件处在某个阶段，要执行某个方法，来通知我们，组件进入某个阶段，这个方法就是组件生命周期的钩子函数<br>                  　　　　　　4. 组件的创建过程：这些方法在组件中直接定义，会按照顺序执行，没有参数，作用域都是组件实例化对象</p>
<blockquote>
<ol start="2">
<li>组件生命周期中依次执行的八个钩子函数</li>
</ol>
</blockquote>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;!DOCTYPE html&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">html</span> <span class="attr">lang</span>=<span class="string">"en"</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">head</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">meta</span> <span class="attr">charset</span>=<span class="string">"UTF-8"</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">meta</span> <span class="attr">http-equiv</span>=<span class="string">"x-ua-compatible"</span> <span class="attr">content</span>=<span class="string">"IE=edge"</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">meta</span> <span class="attr">name</span>=<span class="string">"viewport"</span> <span class="attr">content</span>=<span class="string">"width=device-width, initial-scale=1"</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">title</span>&gt;</span>Title<span class="tag">&lt;/<span class="name">title</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">head</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">id</span>=<span class="string">"app"</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">Home</span>&gt;</span><span class="tag">&lt;/<span class="name">Home</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;<span class="name">script</span> <span class="attr">src</span>=<span class="string">"vue.js"</span>&gt;</span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">script</span>&gt;</span></span><br><span class="line"><span class="javascript">        <span class="keyword">var</span> Home = Vue.extend(&#123;</span></span><br><span class="line"><span class="xml">           template:"<span class="tag">&lt;<span class="name">h1</span>&gt;</span>I am h1!! 显示变量： &#123;&#123;msg&#125;&#125;<span class="tag">&lt;/<span class="name">h1</span>&gt;</span>",</span></span><br><span class="line"><span class="javascript">            data:<span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span></span><br><span class="line"><span class="javascript">                <span class="keyword">return</span> &#123;</span></span><br><span class="line"><span class="javascript">                    <span class="string">'msg'</span>:<span class="string">'I am msg'</span></span></span><br><span class="line">                &#125;</span><br><span class="line">            &#125;,</span><br><span class="line"></span><br><span class="line"><span class="javascript">            <span class="comment">// 方法1：组件实例被创建，组件属性计算之前，如data属性等</span></span></span><br><span class="line"><span class="javascript">             beforeCreate: <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span></span><br><span class="line"><span class="javascript">                 <span class="built_in">console</span>.log(<span class="number">111</span>, <span class="keyword">this</span>, <span class="built_in">arguments</span>)</span></span><br><span class="line">             &#125;,</span><br><span class="line"></span><br><span class="line"><span class="javascript">            <span class="comment">// 方法2：组件实例创建完成，属性已经绑定，但DOM还未生成，$el 属性还不存在</span></span></span><br><span class="line"><span class="javascript">             created: <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span></span><br><span class="line"><span class="javascript">                 <span class="built_in">console</span>.log(<span class="number">222</span>, <span class="keyword">this</span>, <span class="built_in">arguments</span>)</span></span><br><span class="line">             &#125;,</span><br><span class="line"></span><br><span class="line"><span class="javascript">            <span class="comment">// 方法3：模板编译/挂载之前</span></span></span><br><span class="line"><span class="javascript">             beforeMount: <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span></span><br><span class="line"><span class="javascript">                 <span class="built_in">console</span>.log(<span class="number">333</span>, <span class="keyword">this</span>, <span class="built_in">arguments</span>)</span></span><br><span class="line">             &#125;,</span><br><span class="line"></span><br><span class="line"><span class="javascript">            <span class="comment">// 方法4：模板编译/挂载之后（不保证组件已在document中）</span></span></span><br><span class="line"><span class="javascript">             mounted: <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span></span><br><span class="line"><span class="javascript">                 <span class="built_in">console</span>.log(<span class="number">444</span>, <span class="keyword">this</span>, <span class="built_in">arguments</span>)</span></span><br><span class="line">             &#125;,</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="javascript">            <span class="comment">// 方法5：组件更新之前</span></span></span><br><span class="line"><span class="javascript">             beforeUpdate: <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span></span><br><span class="line"><span class="javascript">                 <span class="built_in">console</span>.log(<span class="number">555</span>, <span class="keyword">this</span>, <span class="built_in">arguments</span>)</span></span><br><span class="line">             &#125;,</span><br><span class="line"></span><br><span class="line"><span class="javascript">            <span class="comment">// 方法6：组件更新之后</span></span></span><br><span class="line"><span class="javascript">             updated: <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span></span><br><span class="line"><span class="javascript">                 <span class="built_in">console</span>.log(<span class="number">666</span>, <span class="keyword">this</span>, <span class="built_in">arguments</span>)</span></span><br><span class="line">             &#125;,</span><br><span class="line"></span><br><span class="line"><span class="javascript">             <span class="comment">// 方法9：组件销毁前调用</span></span></span><br><span class="line"><span class="javascript">             beforeDestory: <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span></span><br><span class="line"><span class="javascript">                 <span class="built_in">console</span>.log(<span class="number">777</span>, <span class="keyword">this</span>, <span class="built_in">arguments</span>)</span></span><br><span class="line">             &#125;,</span><br><span class="line"></span><br><span class="line"><span class="javascript">            <span class="comment">// 方法10：主键销毁后调用</span></span></span><br><span class="line"><span class="javascript">             destoryed: <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span></span><br><span class="line"><span class="javascript">                 <span class="built_in">console</span>.log(<span class="number">888</span>, <span class="keyword">this</span>, <span class="built_in">arguments</span>)</span></span><br><span class="line">             &#125;,</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="javascript">            <span class="comment">// 方法7：组件被激活时调用（用的少）</span></span></span><br><span class="line"><span class="javascript">            <span class="comment">// activated: function() &#123;</span></span></span><br><span class="line"><span class="javascript">            <span class="comment">//     console.log(777, this, arguments)</span></span></span><br><span class="line"><span class="javascript">            <span class="comment">// &#125;,</span></span></span><br><span class="line"></span><br><span class="line"><span class="javascript">            <span class="comment">// 方法8：组件被移除时调用（用的少）</span></span></span><br><span class="line"><span class="javascript">            <span class="comment">// deactivated: function () &#123;</span></span></span><br><span class="line"><span class="javascript">            <span class="comment">//     console.log(888, this, arguments)</span></span></span><br><span class="line"><span class="javascript">            <span class="comment">// &#125;,</span></span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">        &#125;);</span><br><span class="line"></span><br><span class="line"><span class="javascript">        Vue.component(<span class="string">'home'</span>,Home);</span></span><br><span class="line"></span><br><span class="line"><span class="javascript">        <span class="keyword">var</span> app = <span class="keyword">new</span> Vue(&#123;</span></span><br><span class="line"><span class="javascript">            el:<span class="string">'#app'</span>,</span></span><br><span class="line">            data:&#123;</span><br><span class="line"><span class="javascript">                <span class="string">'isShow'</span>:<span class="literal">true</span>,</span></span><br><span class="line">            &#125;</span><br><span class="line">        &#125;)</span><br><span class="line">    <span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></span><br></pre></td></tr></table></figure>

<h3 id="2-3-5-组件八大钩子函数图解"><a href="#2-3-5-组件八大钩子函数图解" class="headerlink" title="2.3.5 组件八大钩子函数图解"></a>2.3.5 组件八大钩子函数图解</h3><p>​    <img src="assets/1566889921717.png" alt="1566889921717"></p>
<h3 id="2-3-6-vuex组件间通信"><a href="#2-3-6-vuex组件间通信" class="headerlink" title="2.3.6 vuex组件间通信"></a>2.3.6 <a href="https://www.cnblogs.com/xiaonq/p/9697921.html" target="_blank" rel="noopener">vuex组件间通信</a></h3><blockquote>
<ol>
<li><strong>什么是Vuex？</strong></li>
</ol>
</blockquote>
<ul>
<li>官方说法：Vuex 是一个专为 Vue.js应用程序开发的状态管理模式。</li>
<li>它采用集中式存储管理应用的所有组件的状态，并以相应的规则保证状态以一种可预测的方式发生变化。</li>
<li>个人理解：Vuex是用来管理组件之间通信的一个插件</li>
</ul>
<blockquote>
<ol start="2">
<li>vuex作用</li>
</ol>
</blockquote>
<ul>
<li>我们知道组件之间是独立的，组件之间想要实现通信，我目前知道的就只有props选项，但这也仅限于父组件和子组件之间的通信。</li>
<li>如果兄弟组件之间想要实现通信呢？当做中大型项目时，面对一大堆组件之间的通信，还有一大堆的逻辑代码，会不会很抓狂？？</li>
<li>那为何不把组件之间共享的数据给“拎”出来，在一定的规则下管理这些数据呢？ 这就是Vuex的基本思想了。</li>
<li>总结：使用vuex作用就是实现组件间数据共享</li>
</ul>
<blockquote>
<ol start="3">
<li>vuex原理</li>
</ol>
</blockquote>
<ul>
<li>vue团队为了简化组件间的通信，将state抽象成一个单例模式，将其放到全局，让各个组件都能共享使用</li>
<li>vuex数据传递是单向的：action —&gt; mutation —&gt; state —&gt; component —&gt; action<br>  　　1. <strong>vue component</strong>指的就是我门定义的组件<br>  　　2. <strong>action</strong> 交互中产生的动作<br>  　　3. <strong>mutations</strong> 动作产生的修改数据的行为<br>  　　4. <strong>state</strong> 共享数据<ul>
<li>vuex设计的时候相对修改的行为做单测（测试），开发了devtools来做测试，只能检测同步的操作</li>
<li>规范定义：只能在mutations中做同步操作，所以增加了action来异步处理数据</li>
<li>将mutations中的异步操作转移到actions中了，这样就可以测试同步的操作了</li>
</ul>
</li>
</ul>
<blockquote>
<ol start="4">
<li>vuex使用场景</li>
</ol>
</blockquote>
<ul>
<li>如果您需要构建一个中大型单页应用，您很可能会考虑如何更好地在组件外部管理状态，Vuex 将会成为自然而然的选择。</li>
<li>如果您不打算开发大型单页应用，使用 Vuex 可能是繁琐冗余的。</li>
</ul>
<h2 id="2-3-7-项目中使用组件"><a href="#2-3-7-项目中使用组件" class="headerlink" title="2.3.7 项目中使用组件"></a>2.3.7 项目中使用组件</h2><blockquote>
<p>​    1. 导入组件</p>
</blockquote>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">import orderTemplates from &apos;./order-templates&apos;</span><br></pre></td></tr></table></figure>

<blockquote>
<ol start="2">
<li>注册组件</li>
</ol>
</blockquote>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">components: &#123;</span><br><span class="line">  orderTemplates</span><br><span class="line">&#125;,</span><br></pre></td></tr></table></figure>

<blockquote>
<ol start="3">
<li>使用组件</li>
</ol>
</blockquote>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">&lt;el-row class=&quot;page-content&quot;&gt;</span><br><span class="line">  &lt;order-templates&gt;&lt;/order-templates&gt;</span><br><span class="line">&lt;/el-row&gt;</span><br></pre></td></tr></table></figure>

</div><nav class="pagination"><a id="right-navigator" href="/2019/09/10/Halo - Dict/">无题</a></nav></div><nav id="footer"><ul id="footer-links"><li><a href="https://github.com/XuLaoGen" class="zn">关于</a></li><li><a href="/archives" class="zn">所有文章</a></li><li><a href="https://gitee.com/DerrickWilliams" class="zn">RSS</a></li><li><a href="http://www.laoxu1.com/Vitae/" class="zn out-site">我的简历</a></li></ul></nav></div><script src="/live2dw/lib/L2Dwidget.min.js?094cbace49a39548bed64abff5988b05"></script><script>L2Dwidget.init({"log":false,"pluginJsPath":"lib/","pluginModelPath":"assets/","pluginRootPath":"live2dw/","tagMode":false});</script></body></html>